module Test where

import Daml.Script
import Employees
import PartiesSetUp

test_setSalary: Script ()
test_setSalary = script do

    testParties@TestParties{applicant, oldEmployee, employer} <- setupParties
    application <- setupApplication applicant employer
    oldEmployeeAccount <- setupEmployeeAccount oldEmployee employer

    application <- submit employer do
        exerciseCmd application MakeAnOffer with salary=100.0

    application <- submit applicant do
        exerciseCmd application CounterOfferApplicant with salary=120.00

    application <- submit employer do
        exerciseCmd application MakeAnOffer with salary=110.0

    application <- submit applicant do
        exerciseCmd application AcceptOfferApplicant

    employeeAccount <- submit employer do
        exerciseCmd application ReviewApplication

    return ()


test_resquestVacation: Script ()
test_resquestVacation = script do

    testParties@TestParties{applicant, oldEmployee, employer} <- setupParties
    application <- setupApplication applicant employer
    oldEmployeeAccount <- setupEmployeeAccount oldEmployee employer

    oldEmployeeAccount <- submit oldEmployee do
        exerciseCmd oldEmployeeAccount RequestVacation

    oldEmployeeAccount <- submit employer do
        exerciseCmd oldEmployeeAccount ReviewVacationRequest

    return ()


    -- submitMustFail employer do
    --     exerciseCmd employeeAccount ReviewVacationRequest